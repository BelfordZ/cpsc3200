#include<iostream>
#include<cstdlib>
#include<cstdio>
#define SIZE 10000
using namespace std;

int tableDigit[SIZE][4];

void clearNotMatch(int num, int A, int B, bool guess[])
{
   int numDigit[4];
   for(int i=0; i<4; i++)
   {
      numDigit[i] = num%10;
      num/=10;
   }
   
   for(int i=0; i<SIZE; i++)
   {
      int statNum[10]={0};
      int statTable[10]={0};
      int calA=0, calB=0;
      
      for(int d=0; d<4; d++)
      {
	 if(numDigit[d]==tableDigit[i][d])
	    calA++;
	 statNum[numDigit[d]]++;
	 statTable[tableDigit[i][d]]++;
      }
      
      for(int s=0; s<10; s++)
      {
	 calB+=min(statNum[s],statTable[s]);
      }
      calB-=calA;
      
      guess[i] = guess[i]&&(calA==A&&calB==B);
      
   }
   
}

void output(bool guess[])
{
   int num=0;
   int last=0;
   for(int i=0; i<SIZE; i++)
   {
      if(guess[i])
      {
	 num++;
	 last = i;	 
      }
   }
   
   if(num==0)
   {
      puts("impossible");
   }
   else
      if(num==1)
      {
	 printf("%04d\n",last);
      }
      else
      {
	 
	 puts("indeterminate");
      }
}

int main()
{
   for(int i=0; i<10000; i++)
   {
      int temp = i;
      for(int j=0; j<4; j++)
      {
	 tableDigit[i][j] = temp%10;
	 temp/=10;
      }
   }
   int M;
   cin >> M;
 
   for(int r=0; r<M; r++)
   {
      bool guess[SIZE];
      for(int i=0; i<SIZE; i++)
	  guess[i] = true;

      int n;
      cin >> n;
      for(int i=0; i<n; i++)
      {
	 int num;
	 int A,B;
	 char format;
	 cin >> num >> A >> format >>B;
	 
	 clearNotMatch(num,A,B,guess);
	 
      }
      output(guess);
   }
}
